var $configs = $.extend({
    color: '#' + $field.val(),
    onBeforeShow: function() {
        $(this).ColorPickerSetColor($field.val());
    }
}, {{ configs|json_encode|raw }});

{% if widget == "image" %}
$picker = $('#{{ id }}_color');

$picker.ColorPicker($.extend({
    onChange: function(hsb, hex, rgb) {
        $field.val(hex);

        $('div', $picker).css({
            backgroundColor: '#' + hex
        });
    }
}, $configs));
{% else %}
$field.ColorPicker($.extend({
    onChange: function(hsb, hex, rgb) {
        $field.val(hex).css({
            backgroundColor: '#' + hex
        });
    }
}, $configs));
{% endif %}