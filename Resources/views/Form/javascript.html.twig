{% block form_javascript %}
{% spaceless %}
    {% for child in form %}
        {{ form_javascript(child) }}
    {% endfor %}
    {% block form_javascript_prototype %}{% endblock form_javascript_prototype %}
{% endspaceless %}
{% endblock form_javascript %}

{% block field_javascript "" %}

{% block bootstrap_collection_javascript %}
{% spaceless %}
    <script type="text/javascript">
    jQuery(document).ready(function($) {
        var $field = $('#{{ id }}');
        
        {% block collection_javascript_prototype %}
        $field.bootstrapCollection({
            allow_add:        {{ allow_add }},
            allow_delete:     {{ allow_delete }},
            sortable:         {{ sortable }},
            sortable_name:    '{{ sortable_name }}',
            prototype_name:   '{{ prototype_name }}',
            trans: {
                new_label:      '{{ new_label|trans({}, translation_domain) }}',
                confirm:        '{{ 'action.object.delete.confirm'|trans({}, 'Admingenerator') }}',
                confirm_batch:  '{{ 'action.batch.delete.confirm'|trans({}, 'Admingenerator') }}'
            },
            javascript: function(id) {
                {% if prototype.vars.compound %}
                    {% for child in prototype %}
                        $field = $('#' + id + '_{{ child.vars.name }}');
                        {{ form_javascript(child, true) }}
                    {% endfor %}
                {% else %}
                    $field = $('#' + id);
                    {{ form_javascript(prototype, true) }}
                {% endif %}
            }
        });
        {% endblock %}
    });
    </script>
    {% for child in form %}
        {{ form_javascript(child) }}
    {% endfor %}
{% endspaceless %}
{% endblock bootstrap_collection_javascript %}
    
{% block collection_fieldset_javascript %}
    {{ block('bootstrap_collection_javascript') }}
{% endblock collection_fieldset_javascript %}
    
{% block collection_table_javascript %}
    {{ block('bootstrap_collection_javascript') }}
{% endblock collection_table_javascript %}

{% block color_javascript %}
{% spaceless %}
    <script type="text/javascript">
    jQuery(document).ready(function($) {
        var $field = $('#{{ id }}');
        
    {% block color_javascript_prototype %}
        var $configs = $.extend({
            color: '#' + $field.val(),
            onBeforeShow: function() {
                $(this).ColorPickerSetColor($field.val());
            }
        }, {{ configs|json_encode|raw }});

        {% if widget == "image" %}
        $picker = $('#{{ id }}_color');

        $picker.ColorPicker($.extend({
            onChange: function(hsb, hex, rgb) {
                $field.val(hex);

                $('div', $picker).css({
                    backgroundColor: '#' + hex
                });
            }
        }, $configs));
        {% else %}
        $field.ColorPicker($.extend({
            onChange: function(hsb, hex, rgb) {
                $field.val(hex).css({
                    backgroundColor: '#' + hex
                });
            }
        }, $configs));
        {% endif %}
    {% endblock %}
    });
    </script>
{% endspaceless %}
{% endblock color_javascript %}

{% block select2_javascript %}
    <script type="text/javascript">
    jQuery(document).ready(function($) {
        $field = $('#{{ id }}');

    {% block select2_javascript_prototype %}
        $field.select2({{ configs|json_encode|raw }});
    {% endblock %}
    });
    </script>
{% endblock select2_javascript %}

